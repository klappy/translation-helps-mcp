name = "translation-helps-mcp"
compatibility_date = "2024-09-23"
pages_build_output_dir = "ui/.svelte-kit/cloudflare"

# Enable Node.js compatibility for fs, path, etc.
compatibility_flags = ["nodejs_compat"]

# Cloudflare Pages specific configuration
[env.production.vars]
  NODE_ENV = "production"

[env.production]
  # Duplicate bindings under production environment so Pages Functions get them
  [[env.production.kv_namespaces]]
  binding = "TRANSLATION_HELPS_CACHE"
  id = "116847d7b0714a9c8d2882335b05d35a"

  [[env.production.r2_buckets]]
  binding = "ZIP_FILES"
  bucket_name = "translation-helps-mcp-zip-persistence"

  # AI binding for production (for Workers AI / AI Search)
  # Note: AI Search index configuration is done via Cloudflare dashboard
  [env.production.ai]
  binding = "AI"

[env.preview.vars]
  NODE_ENV = "development"

# KV Namespace binding (you'll need to create this in Cloudflare dashboard)
# Run: npx wrangler kv namespace create "TRANSLATION_HELPS_CACHE"
# Then update the id below with the actual namespace ID
[[kv_namespaces]]
binding = "TRANSLATION_HELPS_CACHE"
id = "116847d7b0714a9c8d2882335b05d35a"
preview_id = "3073e58cc3eb4f16958854a6ec1531e6"

# R2 bucket for ZIPs and extracted files
[[r2_buckets]]
binding = "ZIP_FILES"
bucket_name = "translation-helps-mcp-zip-persistence"

# AI binding for Workers AI / AI Search
# Create AI Search index via Cloudflare dashboard
# Documentation: https://developers.cloudflare.com/ai-search/
[ai]
binding = "AI"

# For Pages deployment, use: npx wrangler pages deploy ui/build
# For secrets: npx wrangler secret put ANTHROPIC_API_KEY 